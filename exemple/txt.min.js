var txt;!function(t){var i=function(){function i(){}return i.set=function(i){null!=i.stage&&(null!=t.Accessibility.timeout&&clearTimeout(t.Accessibility.timeout),null==i.accessibilityId&&(t.Accessibility.data.push(i),i.accessibilityId=t.Accessibility.data.length-1),t.Accessibility.timeout=setTimeout(t.Accessibility.update,300))},i.update=function(){t.Accessibility.timeout=null;var i=t.Accessibility.data.slice(0);i.sort(function(t,i){return t.accessibilityPriority-i.accessibilityPriority});for(var e=i.length,s="",h=i[0].stage.canvas,r=0;e>r;r++)null!=i[r].stage&&(h!=i[r].stage.canvas&&(h.innerHTML=s,s="",h=i[r].stage.canvas),s+=null==i[r].accessibilityText?"<p>"+i[r].text+"</p>":i[r].accessibilityText);h.innerHTML=s},i.clear=function(){t.Accessibility.data=[]},i.data=[],i.timeout=null,i}();t.Accessibility=i}(txt||(txt={}));var __extends=this.__extends||function(t,i){function e(){this.constructor=t}for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s]);e.prototype=i.prototype,t.prototype=new e},txt;!function(t){var i=function(i){function e(e){if(void 0===e&&(e=null),i.call(this),this.text="",this.lineHeight=null,this.width=100,this.height=20,this.align=t.Align.TOP_LEFT,this.characterCase=t.Case.NORMAL,this.size=12,this.font="belinda",this.tracking=0,this.ligatures=!1,this.fillColor="#000",this.strokeColor=null,this.strokeWidth=null,this.loaderId=null,this.style=null,this.debug=!1,this.original=null,this.words=[],this.lines=[],this.missingGlyphs=null,this.renderCycle=!0,this.accessibilityText=null,this.accessibilityPriority=2,this.accessibilityId=null,e&&(this.original=e,this.set(e)),null==this.style)t.FontLoader.load(this,[this.font]);else{for(var s=[this.font],h=this.style.length,r=0;h>r;++r)void 0!=this.style[r]&&void 0!=this.style[r].font&&s.push(this.style[r].font);t.FontLoader.load(this,s)}}return __extends(e,i),e.prototype.render=function(){this.getStage().update()},e.prototype.complete=function(){},e.prototype.fontLoaded=function(t){this.layout()},e.prototype.layout=function(){if(t.Accessibility.set(this),this.text=this.text.replace(/([\n][ \t]+)/g,"\n"),this.words=[],this.lines=[],this.missingGlyphs=null,this.removeAllChildren(),this.block=new createjs.Container,this.addChild(this.block),1==this.debug){var i=t.FontLoader.getFont(this.font),e=new createjs.Shape;e.graphics.beginStroke("#FF0000"),e.graphics.setStrokeStyle(1.2),e.graphics.drawRect(0,0,this.width,this.height),this.addChild(e),e=new createjs.Shape,e.graphics.beginFill("#000"),e.graphics.drawRect(0,0,this.width,.2),e.x=0,e.y=0,this.block.addChild(e),e=new createjs.Shape,e.graphics.beginFill("#F00"),e.graphics.drawRect(0,0,this.width,.2),e.x=0,e.y=-i["cap-height"]/i.units*this.size,this.block.addChild(e),e=new createjs.Shape,e.graphics.beginFill("#0F0"),e.graphics.drawRect(0,0,this.width,.2),e.x=0,e.y=-i.ascent/i.units*this.size,this.block.addChild(e),e=new createjs.Shape,e.graphics.beginFill("#00F"),e.graphics.drawRect(0,0,this.width,.2),e.x=0,e.y=-i.descent/i.units*this.size,this.block.addChild(e)}return""===this.text||void 0===this.text?(this.render(),void this.complete()):this.characterLayout()===!1?void this.removeAllChildren():this.renderCycle===!1?(this.removeAllChildren(),void this.complete()):(this.wordLayout(),this.lineLayout(),this.render(),void this.complete())},e.prototype.characterLayout=function(){var i,e=this.text.length,s={size:this.size,font:this.font,tracking:this.tracking,characterCase:this.characterCase,fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth},h=s,r=0,a=0,n=new t.Word;this.words.push(n);for(var o=0;e>o;o++)if(null!==this.style&&void 0!==this.style[o]&&(h=this.style[o],void 0===h.size&&(h.size=s.size),void 0===h.font&&(h.font=s.font),void 0===h.tracking&&(h.tracking=s.tracking),void 0===h.characterCase&&(h.characterCase=s.characterCase),void 0===h.fillColor&&(h.fillColor=s.fillColor),void 0===h.strokeColor&&(h.strokeColor=s.strokeColor),void 0===h.strokeWidth&&(h.strokeWidth=s.strokeWidth)),"\n"!=this.text.charAt(o)){if(t.FontLoader.isLoaded(h.font)===!1)return t.FontLoader.load(this,[h.font]),!1;if(i=new t.Character(this.text.charAt(o),h,o),this.original.character&&(this.original.character.added&&i.on("added",this.original.character.added),this.original.character.click&&i.on("click",this.original.character.click),this.original.character.dblclick&&i.on("dblclick",this.original.character.dblclick),this.original.character.mousedown&&i.on("mousedown",this.original.character.mousedown),this.original.character.mouseout&&i.on("mouseout",this.original.character.mouseout),this.original.character.mouseover&&i.on("mouseover",this.original.character.mouseover),this.original.character.pressmove&&i.on("pressmove",this.original.character.pressmove),this.original.character.pressup&&i.on("pressup",this.original.character.pressup),this.original.character.removed&&i.on("removed",this.original.character.removed),this.original.character.rollout&&i.on("rollout",this.original.character.rollout),this.original.character.rollover&&i.on("rollover",this.original.character.rollover),this.original.character.tick&&i.on("tick",this.original.character.tick)),i.missing&&(null==this.missingGlyphs&&(this.missingGlyphs=[]),this.missingGlyphs.push({position:o,character:this.text.charAt(o),font:h.font})),i.measuredHeight>a&&(a=i.measuredHeight),0==h.tracking&&1==this.ligatures){var l=this.text.substr(o,4);i._font.ligatures[l.charAt(0)]&&i._font.ligatures[l.charAt(0)][l.charAt(1)]&&(i._font.ligatures[l.charAt(0)][l.charAt(1)][l.charAt(2)]?i._font.ligatures[l.charAt(0)][l.charAt(1)][l.charAt(2)][l.charAt(3)]?(i.setGlyph(i._font.ligatures[l.charAt(0)][l.charAt(1)][l.charAt(2)][l.charAt(3)].glyph),o+=3):(i.setGlyph(i._font.ligatures[l.charAt(0)][l.charAt(1)][l.charAt(2)].glyph),o+=2):(i.setGlyph(i._font.ligatures[l.charAt(0)][l.charAt(1)].glyph),o+=1))}i.x=r,n.addChild(i)," "!=this.text.charAt(o)?("-"==this.text.charAt(o)&&(n.hasHyphen=!0),r=i.x+i._glyph.offset*i.size+i.characterCaseOffset+i.trackingOffset()+i._glyph.getKerning(this.text.charCodeAt(o+1),i.size)):(n.hasSpace=!0,n.spaceOffset=i._glyph.offset*i.size,r=i.x+i._glyph.offset*i.size+i.characterCaseOffset+i.trackingOffset()+i._glyph.getKerning(this.text.charCodeAt(o+1),i.size),n.measuredWidth=r,n.measuredHeight=a,r=0,a=0,n=new t.Word,this.words.push(n))}else e-1>o&&(n.measuredWidth=r,n.measuredHeight=a,0==n.measuredHeight&&(n.measuredHeight=h.size),n.hasNewLine=!0,n=new t.Word,this.words.push(n),a=0,r=0);if(0==n.children.length){{this.words.pop()}n=this.words[this.words.length-1],r=n.measuredWidth,a=n.measuredHeight}return n.measuredWidth=r,n.measuredHeight=a,!0},e.prototype.wordLayout=function(){var i=this.words.length,e=new t.Line;this.lines.push(e),e.y=0;var s,h;this.block.addChild(e);for(var r,a=0,n=0,o=!0,l=0;i>l;l++)if(s=this.words[l],s.x=a,this.original.word&&(this.original.word.added&&s.on("added",this.original.word.added),this.original.word.click&&s.on("click",this.original.word.click),this.original.word.dblclick&&s.on("dblclick",this.original.word.dblclick),this.original.word.mousedown&&s.on("mousedown",this.original.word.mousedown),this.original.word.mouseout&&s.on("mouseout",this.original.word.mouseout),this.original.word.mouseover&&s.on("mouseover",this.original.word.mouseover),this.original.word.pressmove&&s.on("pressmove",this.original.word.pressmove),this.original.word.pressup&&s.on("pressup",this.original.word.pressup),this.original.word.removed&&s.on("removed",this.original.word.removed),this.original.word.rollout&&s.on("rollout",this.original.word.rollout),this.original.word.rollover&&s.on("rollover",this.original.word.rollover),this.original.word.tick&&s.on("tick",this.original.word.tick)),o?n=s.measuredHeight:null!=this.lineHeight?n=this.lineHeight:s.measuredHeight>n&&(n=s.measuredHeight),a+s.measuredWidth>this.width&&1==s.hasNewLine&&e.children.length>0){h=null!=this.lineHeight?e.y+this.lineHeight:e.y+n,e.measuredWidth=a,r=this.words[l-1],void 0!=r&&r.hasSpace&&(e.measuredWidth-=r.spaceOffset),e.measuredHeight=0==o&&null!=this.lineHeight?this.lineHeight:n,o=!1,e=new t.Line,this.lines.push(e),e.y=h,a=0,s.x=0,this.block.addChild(e);var c=this.words[l];e.addChild(c),e.measuredHeight=null!=this.lineHeight?this.lineHeight:c.measuredHeight,e.measuredWidth=c.measuredWidth,e=new t.Line,this.lines.push(e),e.y=null!=this.lineHeight?h+this.lineHeight:h+n,this.block.addChild(e),i-1>l&&(n=0)}else{if(a+s.measuredWidth>this.width&&l>0&&e.children.length>0)h=null!=this.lineHeight?e.y+this.lineHeight:e.y+n,e.measuredWidth=a,r=this.words[l-1],void 0!=r&&r.hasSpace&&(e.measuredWidth-=r.spaceOffset),e.measuredHeight=0==o&&null!=this.lineHeight?this.lineHeight:n,o=!1,e=new t.Line,this.lines.push(e),e.y=h,i-1>l&&(n=0),a=0,s.x=a,this.block.addChild(e);else if(1==s.hasNewLine){h=null!=this.lineHeight?e.y+this.lineHeight:e.y+n,e.measuredWidth=a+s.measuredWidth,e.measuredHeight=0==o&&null!=this.lineHeight?this.lineHeight:n,e.addChild(this.words[l]),o=!1,e=new t.Line,this.lines.push(e),e.y=h,i-1>l&&(n=0),a=0,this.block.addChild(e);continue}a+=s.measuredWidth,e.addChild(this.words[l])}if(0==e.children.length){{this.lines.pop()}e=this.lines[this.lines.length-1]}e.measuredWidth=a,e.measuredHeight=n},e.prototype.lineLayout=function(){for(var i,e=0,s=t.Align,h=t.FontLoader.getFont(this.font),r=(this.size*h.ascent/h.units,this.size*h["cap-height"]/h.units,this.size*h["x-height"]/h.units,this.size*h.descent/h.units,this.lines.length),a=0;r>a;a++)i=this.lines[a],this.original.line&&(this.original.line.added&&i.on("added",this.original.line.added),this.original.line.click&&i.on("click",this.original.line.click),this.original.line.dblclick&&i.on("dblclick",this.original.line.dblclick),this.original.line.mousedown&&i.on("mousedown",this.original.line.mousedown),this.original.line.mouseout&&i.on("mouseout",this.original.line.mouseout),this.original.line.mouseover&&i.on("mouseover",this.original.line.mouseover),this.original.line.pressmove&&i.on("pressmove",this.original.line.pressmove),this.original.line.pressup&&i.on("pressup",this.original.line.pressup),this.original.line.removed&&i.on("removed",this.original.line.removed),this.original.line.rollout&&i.on("rollout",this.original.line.rollout),this.original.line.rollover&&i.on("rollover",this.original.line.rollover),this.original.line.tick&&i.on("tick",this.original.line.tick)),void 0!=i.lastWord()&&i.lastWord().lastCharacter()&&(i.measuredWidth-=i.lastWord().lastCharacter().trackingOffset()),e+=i.measuredHeight,this.align===s.TOP_CENTER?i.x=(this.width-i.measuredWidth)/2:this.align===s.TOP_RIGHT?i.x=this.width-i.measuredWidth:this.align===s.MIDDLE_CENTER?i.x=(this.width-i.measuredWidth)/2:this.align===s.MIDDLE_RIGHT?i.x=this.width-i.measuredWidth:this.align===s.BOTTOM_CENTER?i.x=(this.width-i.measuredWidth)/2:this.align===s.BOTTOM_RIGHT&&(i.x=this.width-i.measuredWidth);this.align===s.TOP_LEFT||this.align===s.TOP_CENTER||this.align===s.TOP_RIGHT?this.block.y=this.lines[0].measuredHeight*h.ascent/h.units+this.lines[0].measuredHeight*h.top/h.units:this.align===s.MIDDLE_LEFT||this.align===s.MIDDLE_CENTER||this.align===s.MIDDLE_RIGHT?this.block.y=this.lines[0].measuredHeight+(this.height-e)/2+this.lines[0].measuredHeight*h.middle/h.units:(this.align===s.BOTTOM_LEFT||this.align===s.BOTTOM_CENTER||this.align===s.BOTTOM_RIGHT)&&(this.block.y=this.height-this.lines[this.lines.length-1].y+this.lines[0].measuredHeight*h.bottom/h.units),this.original.block&&(this.original.block.added&&this.block.on("added",this.original.block.added),this.original.block.click&&this.block.on("click",this.original.block.click),this.original.block.dblclick&&this.block.on("dblclick",this.original.block.dblclick),this.original.block.mousedown&&this.block.on("mousedown",this.original.block.mousedown),this.original.block.mouseout&&this.block.on("mouseout",this.original.block.mouseout),this.original.block.mouseover&&this.block.on("mouseover",this.original.block.mouseover),this.original.block.pressmove&&this.block.on("pressmove",this.original.block.pressmove),this.original.block.pressup&&this.block.on("pressup",this.original.block.pressup),this.original.block.removed&&this.block.on("removed",this.original.block.removed),this.original.block.rollout&&this.block.on("rollout",this.original.block.rollout),this.original.block.rollover&&this.block.on("rollover",this.original.block.rollover),this.original.block.tick&&this.block.on("tick",this.original.block.tick))},e}(createjs.Container);t.Text=i}(txt||(txt={}));var txt;!function(t){var i=function(i){function e(e,s,h,r){if(void 0===h&&(h=null),void 0===r&&(r=null),i.call(this),this.character="",this.characterCode=null,this.font=null,this.tracking=null,this.characterCase=null,this.characterCaseOffset=0,this.index=null,this.size=null,this.fillColor=null,this.strokeColor=null,this.strokeWidth=null,this.measuredWidth=null,this.measuredHeight=null,this.hPosition=null,this.missing=!1,this.set(s),this.index=h,this.characterCase==t.Case.NORMAL)this.character=e;else if(this.characterCase==t.Case.UPPER)this.character=e.toUpperCase();else if(this.characterCase==t.Case.LOWER)this.character=e.toLowerCase();else if(this.characterCase==t.Case.SMALL_CAPS){this.character=e.toUpperCase();var a=!(e===this.character)}else this.character=e;this.characterCode=this.character.charCodeAt(0),this._font=t.FontLoader.getFont(this.font),this._font.glyphs[this.characterCode]?this._glyph=this._font.glyphs[this.characterCode]:this._font.glyphs[String.fromCharCode(this.characterCode).toLowerCase().charCodeAt(0)]?this._glyph=this._font.glyphs[String.fromCharCode(this.characterCode).toLowerCase().charCodeAt(0)]:this._font.glyphs[String.fromCharCode(this.characterCode).toUpperCase().charCodeAt(0)]&&(this._glyph=this._font.glyphs[String.fromCharCode(this.characterCode).toUpperCase().charCodeAt(0)]),void 0===this._glyph&&(console.log("MISSING GLYPH:"+this.character),this._glyph=this._font.glyphs[42],this.missing=!0),this.graphics=this._glyph.graphic(),this.characterCase===t.Case.SMALL_CAPS&&a?(this.scaleX=this.size/this._font.units*.8,this.characterCaseOffset=-.2*this._glyph.offset*this.size):this.scaleX=this.size/this._font.units,this.scaleY=-this.scaleX,this.measuredHeight=(this._font.ascent-this._font.descent)*this.scaleX,this.measuredWidth=this.scaleX*this._glyph.offset*this._font.units;var n=new createjs.Shape;n.graphics.beginFill("#000").drawRect(0,this._font.descent,this._glyph.offset*this._font.units,this._font.ascent-this._font.descent),this.hitArea=n}return __extends(e,i),e.prototype.setGlyph=function(t){this._glyph=t,this.graphics=this._glyph.graphic()},e.prototype.trackingOffset=function(){return this.size*(2.5/this._font.units+1/900+this.tracking/990)},e.prototype.draw=function(t){return this._glyph._fill.style=this.fillColor,this._glyph._fill.matrix=null,this._glyph._stroke.style=this.strokeColor,this._glyph._strokeStyle.width=this.strokeWidth,this._glyph.draw(t)},e.prototype.getWidth=function(){return this.size*this._glyph.offset},e}(createjs.Shape);t.Character=i}(txt||(txt={}));var txt;!function(t){var i=function(){function t(){this.glyphs={},this.kerning={},this.top=0,this.middle=0,this.bottom=0,this.units=1e3,this.ligatures={},this.loaded=!1,this.targets=[]}return t.prototype.cloneGlyph=function(t,i){void 0==this.glyphs[t]&&void 0!=this.glyphs[i]&&(this.glyphs[t]=this.glyphs[i],this.kerning[t]=this.kerning[i])},t}();t.Font=i}(txt||(txt={}));var txt;!function(t){var i=function(){function t(){this.path="",this.kerning={},this._graphic=null}return t.prototype.graphic=function(){return null==this._graphic&&(this._graphic=new createjs.Graphics,this._stroke=new createjs.Graphics.Stroke(null,!0),this._strokeStyle=new createjs.Graphics.StrokeStyle(0),this._fill=new createjs.Graphics.Fill(null),this._graphic.decodeSVGPath(this.path),this._graphic.append(this._fill),this._graphic.append(this._strokeStyle),this._graphic.append(this._stroke)),this._graphic},t.prototype.draw=function(t){return this._graphic.draw(t),!0},t.prototype.getKerning=function(t,i){return void 0!=this.kerning[t]?-(this.kerning[t]*i):0},t}();t.Glyph=i}(txt||(txt={}));var txt;!function(t){var i=function(){function i(){}return i.isLoaded=function(i){return t.FontLoader.fonts.hasOwnProperty(i)?t.FontLoader.fonts[i].loaded:!1},i.getFont=function(i){return t.FontLoader.fonts.hasOwnProperty(i)?t.FontLoader.fonts[i]:null},i.load=function(i,e){var s;null==i.loaderId?(s={},i.loaderId=t.FontLoader.loaders.push(s)-1,s._id=i.loaderId,s._target=i):s=t.FontLoader.loaders[i.loaderId];for(var h=e.length,r=0;h>r;++r)s[e[r]]=!1;for(var a in s)"_"!=a.charAt(0)&&t.FontLoader.loadFont(a,s)},i.check=function(i){var e=t.FontLoader.loaders[i];for(var s in e)if("_"!=s.charAt(0)&&(e[s]=t.FontLoader.isLoaded(s),0==e[s]))return;window.setTimeout(function(){e._target.fontLoaded()},1)},i.loadFont=function(i,e){t.FontLoader.fonts;if(t.FontLoader.fonts.hasOwnProperty(i))t.FontLoader.fonts[i].loaded===!0?t.FontLoader.check(e._id):t.FontLoader.fonts[i].targets.push(e._id);else{var s=t.FontLoader.fonts[i]=new t.Font;s.targets.push(e._id);var h=new XMLHttpRequest;if(localStorage&&t.FontLoader.cache){var r=JSON.parse(localStorage.getItem("txt_font_"+i.split(" ").join("_")));null!=r&&r.version===t.FontLoader.version&&(h.cacheResponseText=r.font,h.cacheFont=!0)}h.onload=function(){localStorage&&t.FontLoader.cache&&void 0==this.cacheFont&&localStorage.setItem("txt_font_"+i.split(" ").join("_"),JSON.stringify({font:this.responseText,version:t.FontLoader.version}));var e=this.responseText.split("\n");this.cacheResponseText&&(e=this.cacheResponseText.split("\n"));for(var h,r,a=e.length,n=0;a>n;){switch(h=e[n].split("|"),h[0]){case"0":s[h[1]]="id"==h[1]||"panose"==h[1]||"family"==h[1]||"font-style"==h[1]||"font-stretch"==h[1]?h[2]:parseInt(h[2]);break;case"1":r=new t.Glyph,r.offset=parseInt(h[2])/s.units,r.path=h[3],s.glyphs[h[1]]=r;break;case"2":void 0==s.kerning[h[1]]&&(s.kerning[h[1]]={}),void 0==s.glyphs[h[1]]&&(r=new t.Glyph,r.offset=s["default"]/s.units,r.path="",s.glyphs[h[1]]=r),s.glyphs[h[1]].kerning[h[2]]=parseInt(h[3])/s.units,s.kerning[h[1]][h[2]]=parseInt(h[3])/s.units;break;case"3":h.shift();for(var o=h.length,l=0;o>l;l++)for(var c=h[l].split(""),g=c.length,d=s.ligatures,u=0;g>u;u++)void 0==d[c[u]]&&(d[c[u]]={}),u==g-1&&(d[c[u]].glyph=s.glyphs[h[l]]),d=d[c[u]]}n++}s.cloneGlyph(183,8226),s.cloneGlyph(8729,8226),s.cloneGlyph(12539,8226),s.cloneGlyph(9702,8226),s.cloneGlyph(9679,8226),s.cloneGlyph(9675,8226),void 0==s.top&&(s.top=0),void 0==s.middle&&(s.middle=0),void 0==s.bottom&&(s.bottom=0);var p=s.targets.length;s.loaded=!0;for(var f=0;p>f;++f)t.FontLoader.check(s.targets[f]);s.targets=[]},1==h.cacheFont?h.onload():(h.open("get",t.FontLoader.path+i.split(" ").join("_")+".txt",!0),h.send())}},i.path="/font/",i.cache=!1,i.version=0,i.fonts={},i.loaders=[],i}();t.FontLoader=i}(txt||(txt={})),createjs.Graphics.prototype.decodeSVGPath=function(t){return txt.Graphics.init(this,t),this};var txt;!function(t){var i=function(){function t(){}return t.init=function(i,e){for(var s=t.parsePathData(e),h=createjs.Graphics,r=0;r<s.length;r++){var a=s[r].command,n=s[r].points;switch(a){case"L":i.append(new h.LineTo(n[0],n[1]));break;case"M":i.append(new h.MoveTo(n[0],n[1]));break;case"C":i.append(new h.BezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]));break;case"Q":i.append(new h.QuadraticCurveTo(n[0],n[1],n[2],n[3]));break;case"A":i.append(new h.SVGArc(n[0],n[1],n[2],n[3],n[4],n[5],n[6]));break;case"Z":i.append(new h.ClosePath),i.append(new h.MoveTo(n[0],n[1]))}}},t.parsePathData=function(t){if(!t)return[];var i=t,e=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(var s=0;s<e.length;s++)i=i.replace(new RegExp(e[s],"g"),"|"+e[s]);var h=i.split("|"),r=[],a=0,n=0,o=h.length,l=null;for(s=1;o>s;s++){var c=h[s],g=c.charAt(0);c=c.slice(1),c=c.replace(new RegExp(",-","g"),"-"),c=c.replace(new RegExp("-","g"),",-"),c=c.replace(new RegExp("e,-","g"),"e-");var d=c.split(",");d.length>0&&""===d[0]&&d.shift();for(var u=d.length,p=0;u>p;p++)d[p]=parseFloat(d[p]);for(("z"===g||"Z"===g)&&(d=[!0]);d.length>0&&!isNaN(d[0]);){var f,k,m,v,y,C,b,x,w,L,A=null,_=[],P=a,T=n;switch(g){case"l":a+=d.shift(),n+=d.shift(),A="L",_.push(a,n);break;case"L":a=d.shift(),n=d.shift(),_.push(a,n);break;case"m":var z=d.shift(),R=d.shift();a+=z,n+=R,null==l&&(l=[a,n]),A="M",_.push(a,n),g="l";break;case"M":a=d.shift(),n=d.shift(),A="M",null==l&&(l=[a,n]),_.push(a,n),g="L";break;case"h":a+=d.shift(),A="L",_.push(a,n);break;case"H":a=d.shift(),A="L",_.push(a,n);break;case"v":n+=d.shift(),A="L",_.push(a,n);break;case"V":n=d.shift(),A="L",_.push(a,n);break;case"C":_.push(d.shift(),d.shift(),d.shift(),d.shift()),a=d.shift(),n=d.shift(),_.push(a,n);break;case"c":_.push(a+d.shift(),n+d.shift(),a+d.shift(),n+d.shift()),a+=d.shift(),n+=d.shift(),A="C",_.push(a,n);break;case"S":k=a,m=n,f=r[r.length-1],"C"===f.command&&(k=a+(a-f.points[2]),m=n+(n-f.points[3])),_.push(k,m,d.shift(),d.shift()),a=d.shift(),n=d.shift(),A="C",_.push(a,n);break;case"s":k=a,m=n,f=r[r.length-1],"C"===f.command&&(k=a+(a-f.points[2]),m=n+(n-f.points[3])),_.push(k,m,a+d.shift(),n+d.shift()),a+=d.shift(),n+=d.shift(),A="C",_.push(a,n);break;case"Q":_.push(d.shift(),d.shift()),a=d.shift(),n=d.shift(),_.push(a,n);break;case"q":_.push(a+d.shift(),n+d.shift()),a+=d.shift(),n+=d.shift(),A="Q",_.push(a,n);break;case"T":k=a,m=n,f=r[r.length-1],"Q"===f.command&&(k=a+(a-f.points[0]),m=n+(n-f.points[1])),a=d.shift(),n=d.shift(),A="Q",_.push(k,m,a,n);break;case"t":k=a,m=n,f=r[r.length-1],"Q"===f.command&&(k=a+(a-f.points[0]),m=n+(n-f.points[1])),a+=d.shift(),n+=d.shift(),A="Q",_.push(k,m,a,n);break;case"A":v=d.shift(),y=d.shift(),C=d.shift(),b=d.shift(),x=d.shift(),w=a,L=n,a=d.shift(),n=d.shift(),A="A",_=[[w,L],v,y,C,b,x,[a,n]];break;case"a":v=d.shift(),y=d.shift(),C=d.shift(),b=d.shift(),x=d.shift(),w=a,L=n,a+=d.shift(),n+=d.shift(),A="A",_=[[w,L],v,y,C,b,x,[a,n]];break;case"z":A="Z",l?(a=l[0],n=l[1],l=null):(a=0,n=0),d.shift(),_=[a,n];break;case"Z":A="Z",l?(a=l[0],n=l[1],l=null):(a=0,n=0),d.shift(),_=[a,n]}r.push({command:A||g,points:_,start:{x:P,y:T}})}}return r},t}();t.Graphics=i}(txt||(txt={}));var createjs;!function(t){var i;!function(t){var i=function(){function t(t,i,e,s,h,r,a){if(this.rx=i,this.ry=e,this.x2=a,0!=i&&0!=e){var s=s*(Math.PI/180);i=Math.abs(i),e=Math.abs(e);var n=this.rotClockwise(this.midPoint(t,a),s),o=this.pointMul(n,n),l=Math.pow(i,2),c=Math.pow(e,2),g=Math.sqrt(o[0]/l+o[1]/c);g>1&&(i*=g,e*=g,l=Math.pow(i,2),c=Math.pow(e,2));var d=l*c-l*o[1]-c*o[0];d>-1e-6&&1e-6>d&&(d=0);var u=l*o[1]+c*o[0];u>-1e-6&&1e-6>u&&(u=0);var p=Math.sqrt(d/u);h==r&&(p*=-1);var f=this.scale(p,[i*n[1]/e,-e*n[0]/i]),k=this.sum(this.rotCounterClockwise(f,s),this.meanVec(t,a)),m=[(n[0]-f[0])/i,(n[1]-f[1])/e],v=[(-1*n[0]-f[0])/i,(-1*n[1]-f[1])/e],y=this.angle([1,0],m),C=this.angle(m,v);isNaN(C)&&(C=Math.PI);var b=y,x=y+C;this.cx=k[0],this.cy=k[1],this.phi=s,this.rx=i,this.ry=e,this.start=b,this.end=x,this.fS=!r}}return t.prototype.mag=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},t.prototype.meanVec=function(t,i){return[(t[0]+i[0])/2,(t[1]+i[1])/2]},t.prototype.dot=function(t,i){return t[0]*i[0]+t[1]*i[1]},t.prototype.ratio=function(t,i){return this.dot(t,i)/(this.mag(t)*this.mag(i))},t.prototype.rotClockwise=function(t,i){var e=Math.cos(i),s=Math.sin(i);return[e*t[0]+s*t[1],-1*s*t[0]+e*t[1]]},t.prototype.pointMul=function(t,i){return[t[0]*i[0],t[1]*i[1]]},t.prototype.scale=function(t,i){return[t*i[0],t*i[1]]},t.prototype.sum=function(t,i){return[t[0]+i[0],t[1]+i[1]]},t.prototype.angle=function(t,i){var e=1;return t[0]*i[1]-t[1]*i[0]<0&&(e=-1),e*Math.acos(this.ratio(t,i))},t.prototype.rotCounterClockwise=function(t,i){var e=Math.cos(i),s=Math.sin(i);return[e*t[0]-s*t[1],s*t[0]+e*t[1]]},t.prototype.midPoint=function(t,i){return[(t[0]-i[0])/2,(t[1]-i[1])/2]},t.prototype.exec=function(t){return 0==this.rx||0==this.ry?void t.lineTo(this.x2[0],this.x2[1]):(t.translate(this.cx,this.cy),t.rotate(this.phi),t.scale(this.rx,this.ry),t.arc(0,0,1,this.start,this.end,this.fS),t.scale(1/this.rx,1/this.ry),t.rotate(-this.phi),void t.translate(-this.cx,-this.cy))},t}();t.SVGArc=i}(i=t.Graphics||(t.Graphics={}))}(createjs||(createjs={}));var txt;!function(t){var i=function(){function t(){}return t.NORMAL=0,t.UPPER=1,t.LOWER=2,t.SMALL_CAPS=3,t}();t.Case=i}(txt||(txt={}));var txt;!function(t){var i=function(){function t(){}return t.TOP_LEFT=0,t.TOP_CENTER=1,t.TOP_RIGHT=2,t.MIDDLE_LEFT=3,t.MIDDLE_CENTER=4,t.MIDDLE_RIGHT=5,t.BOTTOM_LEFT=6,t.BOTTOM_CENTER=7,t.BOTTOM_RIGHT=8,t.TL=0,t.TC=1,t.TR=2,t.ML=3,t.MC=4,t.MR=5,t.BL=6,t.BC=7,t.BR=8,t}();t.Align=i}(txt||(txt={}));var txt;!function(t){var i=function(i){function e(e){if(void 0===e&&(e=null),i.call(this),this.text="",this.lineHeight=null,this.width=100,this.height=20,this.align=t.Align.TOP_LEFT,this.characterCase=t.Case.NORMAL,this.size=12,this.minSize=null,this.maxTracking=null,this.font="belinda",this.tracking=0,this.ligatures=!1,this.fillColor="#000",this.strokeColor=null,this.strokeWidth=null,this.singleLine=!1,this.autoExpand=!1,this.autoReduce=!1,this.overset=!1,this.oversetIndex=null,this.loaderId=null,this.style=null,this.debug=!1,this.original=null,this.lines=[],this.missingGlyphs=null,this.renderCycle=!0,this.measured=!1,this.oversetPotential=!1,this.accessibilityText=null,this.accessibilityPriority=2,this.accessibilityId=null,e&&(this.original=e,this.set(e),this.original.tracking=this.tracking),null==this.style)t.FontLoader.load(this,[this.font]);else{for(var s=[this.font],h=this.style.length,r=0;h>r;++r)void 0!=this.style[r]&&void 0!=this.style[r].font&&s.push(this.style[r].font);t.FontLoader.load(this,s)}}return __extends(e,i),e.prototype.complete=function(){},e.prototype.fontLoaded=function(){this.layout()},e.prototype.render=function(){this.getStage().update()},e.prototype.layout=function(){if(t.Accessibility.set(this),this.overset=!1,this.measured=!1,this.oversetPotential=!1,this.original.size&&(this.size=this.original.size),this.original.tracking&&(this.tracking=this.original.tracking),this.text=this.text.replace(/([\n][ \t]+)/g,"\n"),this.singleLine===!0&&(this.text=this.text.split("\n").join(""),this.text=this.text.split("\r").join("")),this.lines=[],this.missingGlyphs=null,this.removeAllChildren(),""===this.text||void 0===this.text)return this.render(),void this.complete();if(this.block=new createjs.Container,this.addChild(this.block),1==this.debug){var i=t.FontLoader.getFont(this.font),e=new createjs.Shape;e.graphics.beginStroke("#FF0000"),e.graphics.setStrokeStyle(1.2),e.graphics.drawRect(0,0,this.width,this.height),this.addChild(e),e=new createjs.Shape,e.graphics.beginFill("#000"),e.graphics.drawRect(0,0,this.width,.2),e.x=0,e.y=0,this.block.addChild(e),e=new createjs.Shape,e.graphics.beginFill("#F00"),e.graphics.drawRect(0,0,this.width,.2),e.x=0,e.y=-i["cap-height"]/i.units*this.size,this.block.addChild(e),e=new createjs.Shape,e.graphics.beginFill("#0F0"),e.graphics.drawRect(0,0,this.width,.2),e.x=0,e.y=-i.ascent/i.units*this.size,this.block.addChild(e),e=new createjs.Shape,e.graphics.beginFill("#00F"),e.graphics.drawRect(0,0,this.width,.2),e.x=0,e.y=-i.descent/i.units*this.size,this.block.addChild(e)}return this.singleLine!==!0||this.autoExpand!==!0&&this.autoReduce!==!0||this.measure(),this.renderCycle===!1?(this.removeAllChildren(),void this.complete()):this.characterLayout()===!1?void this.removeAllChildren():(this.lineLayout(),this.render(),void this.complete())},e.prototype.measure=function(){this.measured=!0;for(var i,e,s=(this.original.size,this.text.length),h=(this.getWidth(),{size:this.original.size,font:this.original.font,tracking:this.original.tracking,characterCase:this.original.characterCase}),r=null,a=[],n=h.size,o=0;s>o;o++)r=this.text.charCodeAt(o),i=h,void 0!==this.original.style&&void 0!==this.original.style[o]&&(i=this.original.style[o],void 0===i.size&&(i.size=h.size),void 0===i.font&&(i.font=h.font),void 0===i.tracking&&(i.tracking=h.tracking)),i.size>n&&(n=i.size),e=t.FontLoader.fonts[i.font],a.push({"char":this.text[o],size:i.size,charCode:r,font:i.font,offset:e.glyphs[r].offset,units:e.units,tracking:this.trackingOffset(i.tracking,i.size,e.units),kerning:e.glyphs[r].getKerning(this.getCharCodeAt(o+1),1)});var l={"char":" ",size:i.size,charCode:32,font:i.font,offset:e.glyphs[32].offset,units:e.units,tracking:0,kerning:0};a[a.length-1].tracking=0,s=a.length;for(var c=0,g=0,d=0,u=null,o=0;s>o;o++)u=a[o],c=c+u.offset+u.kerning,g+=(u.offset+u.kerning)*u.size,d+=(u.offset+u.kerning+u.tracking)*u.size;if(g>this.width){if(this.autoReduce===!0)return this.tracking=0,this.size=this.original.size*this.width/(g+l.offset*l.size),null!=this.minSize&&this.size<this.minSize&&(this.size=this.minSize,this.oversetPotential=!0),!0}else{var p=this.offsetTracking((this.width-g)/s,u.size,u.units);if(0>p&&(p=0),p>this.original.tracking&&this.autoExpand)return this.tracking=null!=this.maxTracking&&p>this.maxTracking?this.maxTracking:p,this.size=this.original.size,!0;if(p<this.original.tracking&&this.autoReduce)return this.tracking=null!=this.maxTracking&&p>this.maxTracking?this.maxTracking:p,this.size=this.original.size,!0}return!0},e.prototype.trackingOffset=function(t,i,e){return i*(2.5/e+1/900+t/990)},e.prototype.offsetTracking=function(t,i,e){return Math.floor(990*(t-2.5/e-1/900)/i)},e.prototype.getWidth=function(){return this.width},e.prototype.characterLayout=function(){var i,e=this.text.length,s={size:this.size,font:this.font,tracking:this.tracking,characterCase:this.characterCase,fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth},h=s,r=0,a=0,n=0,o=!0,l=new t.Line;this.lines.push(l),this.block.addChild(l);for(var c=0;e>c;c++)if(null!==this.style&&void 0!==this.style[c]&&(h=this.style[c],void 0===h.size&&(h.size=s.size),void 0===h.font&&(h.font=s.font),void 0===h.tracking&&(h.tracking=s.tracking),void 0===h.characterCase&&(h.characterCase=s.characterCase),void 0===h.fillColor&&(h.fillColor=s.fillColor),void 0===h.strokeColor&&(h.strokeColor=s.strokeColor),void 0===h.strokeWidth&&(h.strokeWidth=s.strokeWidth)),"\n"!=this.text.charAt(c)&&"\r"!=this.text.charAt(c)){if(t.FontLoader.isLoaded(h.font)===!1)return t.FontLoader.load(this,[h.font]),!1;if(i=new t.Character(this.text.charAt(c),h,c),this.original.character&&(this.original.character.added&&i.on("added",this.original.character.added),this.original.character.click&&i.on("click",this.original.character.click),this.original.character.dblclick&&i.on("dblclick",this.original.character.dblclick),this.original.character.mousedown&&i.on("mousedown",this.original.character.mousedown),this.original.character.mouseout&&i.on("mouseout",this.original.character.mouseout),this.original.character.mouseover&&i.on("mouseover",this.original.character.mouseover),this.original.character.pressmove&&i.on("pressmove",this.original.character.pressmove),this.original.character.pressup&&i.on("pressup",this.original.character.pressup),this.original.character.removed&&i.on("removed",this.original.character.removed),this.original.character.rollout&&i.on("rollout",this.original.character.rollout),this.original.character.rollover&&i.on("rollover",this.original.character.rollover),this.original.character.tick&&i.on("tick",this.original.character.tick)),i.missing&&(null==this.missingGlyphs&&(this.missingGlyphs=[]),this.missingGlyphs.push({position:c,character:this.text.charAt(c),font:h.font})),o===!0?a<i.size&&(a=i.size):void 0!=this.lineHeight&&this.lineHeight>0?a<this.lineHeight&&(a=this.lineHeight):i.measuredHeight>a&&(a=i.measuredHeight),0==h.tracking&&1==this.ligatures){var g=this.text.substr(c,4);i._font.ligatures[g.charAt(0)]&&i._font.ligatures[g.charAt(0)][g.charAt(1)]&&(i._font.ligatures[g.charAt(0)][g.charAt(1)][g.charAt(2)]?i._font.ligatures[g.charAt(0)][g.charAt(1)][g.charAt(2)][g.charAt(3)]?(i.setGlyph(i._font.ligatures[g.charAt(0)][g.charAt(1)][g.charAt(2)][g.charAt(3)].glyph),c+=3):(i.setGlyph(i._font.ligatures[g.charAt(0)][g.charAt(1)][g.charAt(2)].glyph),
c+=2):(i.setGlyph(i._font.ligatures[g.charAt(0)][g.charAt(1)].glyph),c+=1))}if(1==this.overset)break;if(this.singleLine===!1&&r+i.measuredWidth>this.width){var d=l.children[l.children.length-1];l.measuredWidth=32==d.characterCode?r-d.measuredWidth-d.trackingOffset()-d._glyph.getKerning(this.getCharCodeAt(c),d.size):r-d.trackingOffset()-d._glyph.getKerning(this.getCharCodeAt(c),d.size),o===!0?(l.measuredHeight=a,l.y=0,n=0):(l.measuredHeight=a,n+=a,l.y=n),o=!1,l=new t.Line,l.addChild(i),r=32==i.characterCode?0:i.x+i._glyph.offset*i.size+i.characterCaseOffset+i.trackingOffset(),this.lines.push(l),this.block.addChild(l),a=0}else 1==this.measured&&this.singleLine===!0&&r+i.measuredWidth>this.width&&1==this.oversetPotential?(this.oversetIndex=c,this.overset=!0):0==this.measured&&this.singleLine===!0&&r+i.measuredWidth>this.width?(this.oversetIndex=c,this.overset=!0):(i.x=r,l.addChild(i),r=i.x+i._glyph.offset*i.size+i.characterCaseOffset+i.trackingOffset()+i._glyph.getKerning(this.getCharCodeAt(c+1),i.size))}else e-1>c&&(o===!0?(a=h.size,l.measuredHeight=h.size,l.measuredWidth=r,n=0,l.y=0):void 0!=this.lineHeight?(a=this.lineHeight,l.measuredHeight=a,l.measuredWidth=r,n+=a,l.y=n):(a=i.measuredHeight,l.measuredHeight=a,l.measuredWidth=r,n+=a,l.y=n),o=!1,l=new t.Line,l.measuredHeight=h.size,l.measuredWidth=0,this.lines.push(l),this.block.addChild(l),a=0,r=0),"\r"==this.text.charAt(c)&&"\n"==this.text.charAt(c+1)&&c++;if(0==l.children.length){{this.lines.pop()}l=this.lines[this.lines.length-1],r=l.measuredWidth,a=l.measuredHeight}return o===!0?(l.measuredWidth=r,l.measuredHeight=a,l.y=0):(l.measuredWidth=r,l.measuredHeight=a,0==a&&(a=this.lineHeight?this.lineHeight:h.size),l.y=n+a),!0},e.prototype.getCharCodeAt=function(i){return this.characterCase==t.Case.NORMAL?this.text.charAt(i).charCodeAt(0):this.characterCase==t.Case.UPPER?this.text.charAt(i).toUpperCase().charCodeAt(0):this.characterCase==t.Case.LOWER?this.text.charAt(i).toLowerCase().charCodeAt(0):this.characterCase==t.Case.SMALL_CAPS?this.text.charAt(i).toUpperCase().charCodeAt(0):this.text.charAt(i).charCodeAt(0)},e.prototype.lineLayout=function(){for(var i,e=0,s=t.Align,h=t.FontLoader.getFont(this.font),r=(this.size*h.ascent/h.units,this.size*h["cap-height"]/h.units,this.size*h["x-height"]/h.units,this.size*h.descent/h.units,this.lines.length),a=0;r>a;a++)i=this.lines[a],i.lastCharacter()&&(i.measuredWidth-=i.lastCharacter().trackingOffset()),this.original.line&&(this.original.line.added&&i.on("added",this.original.line.added),this.original.line.click&&i.on("click",this.original.line.click),this.original.line.dblclick&&i.on("dblclick",this.original.line.dblclick),this.original.line.mousedown&&i.on("mousedown",this.original.line.mousedown),this.original.line.mouseout&&i.on("mouseout",this.original.line.mouseout),this.original.line.mouseover&&i.on("mouseover",this.original.line.mouseover),this.original.line.pressmove&&i.on("pressmove",this.original.line.pressmove),this.original.line.pressup&&i.on("pressup",this.original.line.pressup),this.original.line.removed&&i.on("removed",this.original.line.removed),this.original.line.rollout&&i.on("rollout",this.original.line.rollout),this.original.line.rollover&&i.on("rollover",this.original.line.rollover),this.original.line.tick&&i.on("tick",this.original.line.tick)),e+=i.measuredHeight,this.align===s.TOP_CENTER?i.x=(this.width-i.measuredWidth)/2:this.align===s.TOP_RIGHT?i.x=this.width-i.measuredWidth:this.align===s.MIDDLE_CENTER?i.x=(this.width-i.measuredWidth)/2:this.align===s.MIDDLE_RIGHT?i.x=this.width-i.measuredWidth:this.align===s.BOTTOM_CENTER?i.x=(this.width-i.measuredWidth)/2:this.align===s.BOTTOM_RIGHT&&(i.x=this.width-i.measuredWidth);this.align===s.TOP_LEFT||this.align===s.TOP_CENTER||this.align===s.TOP_RIGHT?this.block.y=0==h.top?this.lines[0].measuredHeight*h.ascent/h.units:this.lines[0].measuredHeight*h.ascent/h.units+this.lines[0].measuredHeight*h.top/h.units:this.align===s.MIDDLE_LEFT||this.align===s.MIDDLE_CENTER||this.align===s.MIDDLE_RIGHT?this.block.y=this.lines[0].measuredHeight+(this.height-e)/2+this.lines[0].measuredHeight*h.middle/h.units:(this.align===s.BOTTOM_LEFT||this.align===s.BOTTOM_CENTER||this.align===s.BOTTOM_RIGHT)&&(this.block.y=this.height-this.lines[this.lines.length-1].y+this.lines[0].measuredHeight*h.bottom/h.units),this.original.block&&(this.original.block.added&&this.block.on("added",this.original.block.added),this.original.block.click&&this.block.on("click",this.original.block.click),this.original.block.dblclick&&this.block.on("dblclick",this.original.block.dblclick),this.original.block.mousedown&&this.block.on("mousedown",this.original.block.mousedown),this.original.block.mouseout&&this.block.on("mouseout",this.original.block.mouseout),this.original.block.mouseover&&this.block.on("mouseover",this.original.block.mouseover),this.original.block.pressmove&&this.block.on("pressmove",this.original.block.pressmove),this.original.block.pressup&&this.block.on("pressup",this.original.block.pressup),this.original.block.removed&&this.block.on("removed",this.original.block.removed),this.original.block.rollout&&this.block.on("rollout",this.original.block.rollout),this.original.block.rollover&&this.block.on("rollover",this.original.block.rollover),this.original.block.tick&&this.block.on("tick",this.original.block.tick))},e}(createjs.Container);t.CharacterText=i}(txt||(txt={}));var txt;!function(t){!function(t){t[t.Top=0]="Top",t[t.CapHeight=1]="CapHeight",t[t.Center=2]="Center",t[t.BaseLine=3]="BaseLine",t[t.Bottom=4]="Bottom",t[t.XHeight=5]="XHeight",t[t.Ascent=6]="Ascent",t[t.Percent=7]="Percent"}(t.VerticalAlign||(t.VerticalAlign={}));var i=(t.VerticalAlign,function(i){function e(e){if(void 0===e&&(e=null),i.call(this),this.text="",this.characterCase=t.Case.NORMAL,this.size=12,this.font="belinda",this.tracking=0,this.ligatures=!1,this.minSize=null,this.maxTracking=null,this.fillColor="#000",this.strokeColor=null,this.strokeWidth=null,this.style=null,this.debug=!1,this.original=null,this.autoExpand=!1,this.autoReduce=!1,this.overset=!1,this.oversetIndex=null,this.pathPoints=null,this.path="",this.start=0,this.end=null,this.flipped=!1,this.fit=t.PathFit.Rainbow,this.align=t.PathAlign.Center,this.valign=t.VerticalAlign.BaseLine,this.missingGlyphs=null,this.renderCycle=!0,this.valignPercent=1,this.initialTracking=0,this.initialOffset=0,this.measured=!1,this.oversetPotential=!1,this.accessibilityText=null,this.accessibilityPriority=2,this.accessibilityId=null,e&&(this.original=e,this.set(e),this.original.tracking=this.tracking),null==this.style)t.FontLoader.load(this,[this.font]);else{for(var s=[this.font],h=this.style.length,r=0;h>r;++r)void 0!=this.style[r]&&void 0!=this.style[r].font&&s.push(this.style[r].font);t.FontLoader.load(this,s)}this.pathPoints=new t.Path(this.path,this.start,this.end,this.flipped,this.fit,this.align)}return __extends(e,i),e.prototype.complete=function(){},e.prototype.setPath=function(t){this.path=t,this.pathPoints.path=this.path,this.pathPoints.update()},e.prototype.setStart=function(t){this.start=t,this.pathPoints.start=this.start,this.pathPoints.update()},e.prototype.setEnd=function(t){this.end=t,this.pathPoints.end=this.end,this.pathPoints.update()},e.prototype.setFlipped=function(t){this.flipped=t,this.pathPoints.flipped=this.flipped,this.pathPoints.update()},e.prototype.setFit=function(i){void 0===i&&(i=t.PathFit.Rainbow),this.fit=i,this.pathPoints.fit=this.fit,this.pathPoints.update()},e.prototype.setAlign=function(i){void 0===i&&(i=t.PathAlign.Center),this.align=i,this.pathPoints.align=this.align,this.pathPoints.update()},e.prototype.fontLoaded=function(){this.layout()},e.prototype.render=function(){this.getStage().update()},e.prototype.getWidth=function(){return this.pathPoints.realLength},e.prototype.layout=function(){if(t.Accessibility.set(this),this.overset=!1,this.oversetIndex=null,this.removeAllChildren(),this.characters=[],this.missingGlyphs=null,this.measured=!1,this.oversetPotential=!1,1==this.debug){var i=new createjs.Shape;i.graphics.beginStroke("#FF0000"),i.graphics.setStrokeStyle(.1),i.graphics.decodeSVGPath(this.path),i.graphics.endFill(),i.graphics.endStroke(),this.addChild(i),i=new createjs.Shape;var e=this.pathPoints.getRealPathPoint(0);i.x=e.x,i.y=e.y,i.graphics.beginFill("black"),i.graphics.drawCircle(0,0,2),this.addChild(i),i=new createjs.Shape;var e=this.pathPoints.getRealPathPoint(this.pathPoints.start);i.x=e.x,i.y=e.y,i.graphics.beginFill("green"),i.graphics.drawCircle(0,0,2),this.addChild(i),i=new createjs.Shape,e=this.pathPoints.getRealPathPoint(this.pathPoints.end),i.x=e.x,i.y=e.y,i.graphics.beginFill("red"),i.graphics.drawCircle(0,0,2),this.addChild(i),i=new createjs.Shape,e=this.pathPoints.getRealPathPoint(this.pathPoints.center),i.x=e.x,i.y=e.y,i.graphics.beginFill("blue"),i.graphics.drawCircle(0,0,2),this.addChild(i)}return""===this.text||void 0===this.text?void this.render():(this.block=new createjs.Container,this.addChild(this.block),this.autoExpand!==!0&&this.autoReduce!==!0||this.measure()!==!1?this.renderCycle===!1?(this.removeAllChildren(),void this.complete()):this.characterLayout()===!1?void this.removeAllChildren():(this.render(),void this.complete()):void this.removeAllChildren())},e.prototype.measure=function(){this.measured=!0;for(var i,e,s=(this.original.size,this.text.length),h=this.getWidth(),r={size:this.original.size,font:this.original.font,tracking:this.original.tracking,characterCase:this.original.characterCase},a=null,n=[],o=r.size,l=0;s>l;l++)a=this.text.charCodeAt(l),i=r,void 0!==this.original.style&&void 0!==this.original.style[l]&&(i=this.original.style[l],void 0===i.size&&(i.size=r.size),void 0===i.font&&(i.font=r.font),void 0===i.tracking&&(i.tracking=r.tracking)),i.size>o&&(o=i.size),e=t.FontLoader.fonts[i.font],n.push({"char":this.text[l],size:i.size,charCode:a,font:i.font,offset:e.glyphs[a].offset,units:e.units,tracking:this.trackingOffset(i.tracking,i.size,e.units),kerning:e.glyphs[a].getKerning(this.getCharCodeAt(l+1),1)});var c={"char":" ",size:i.size,charCode:32,font:i.font,offset:e.glyphs[32].offset,units:e.units,tracking:0,kerning:0};n[n.length-1].tracking=0,s=n.length;for(var g=0,d=0,u=0,p=null,l=0;s>l;l++)p=n[l],g=g+p.offset+p.kerning,d+=(p.offset+p.kerning)*p.size,u+=(p.offset+p.kerning+p.tracking)*p.size;if(d>h){if(this.autoReduce===!0)return this.tracking=0,this.size=this.original.size*h/(d+c.offset*c.size),null!=this.minSize&&this.size<this.minSize&&(this.size=this.minSize,this.renderCycle===!1?this.overset=!0:this.oversetPotential=!0),!0}else{var f=this.offsetTracking((h-d)/s,p.size,p.units);if(0>f&&(f=0),f>this.original.tracking&&this.autoExpand)return this.tracking=null!=this.maxTracking&&f>this.maxTracking?this.maxTracking:f,this.size=this.original.size,!0;if(f<this.original.tracking&&this.autoReduce)return this.tracking=null!=this.maxTracking&&f>this.maxTracking?this.maxTracking:f,this.size=this.original.size,!0}return!0},e.prototype.characterLayout=function(){for(var i,e=this.text.length,s={size:this.size,font:this.font,tracking:this.tracking,characterCase:this.characterCase,fillColor:this.fillColor,strokeColor:this.strokeColor,strokeWidth:this.strokeWidth},h=s,r=0,a=0;e>a;a++)if(null!==this.style&&void 0!==this.style[a]&&(h=this.style[a],void 0===h.size&&(h.size=s.size),void 0===h.font&&(h.font=s.font),void 0===h.tracking&&(h.tracking=s.tracking),void 0===h.characterCase&&(h.characterCase=s.characterCase),void 0===h.fillColor&&(h.fillColor=s.fillColor),void 0===h.strokeColor&&(h.strokeColor=s.strokeColor),void 0===h.strokeWidth&&(h.strokeWidth=s.strokeWidth)),"\n"!=this.text.charAt(a)){if(t.FontLoader.isLoaded(h.font)===!1)return t.FontLoader.load(this,[h.font]),!1;if(0==r&&(r=this.initialOffset+this.trackingOffset(this.initialTracking,h.size,t.FontLoader.getFont(h.font).units)),i=new t.Character(this.text.charAt(a),h,a),this.original.character&&(this.original.character.added&&i.on("added",this.original.character.added),this.original.character.click&&i.on("click",this.original.character.click),this.original.character.dblclick&&i.on("dblclick",this.original.character.dblclick),this.original.character.mousedown&&i.on("mousedown",this.original.character.mousedown),this.original.character.mouseout&&i.on("mouseout",this.original.character.mouseout),this.original.character.mouseover&&i.on("mouseover",this.original.character.mouseover),this.original.character.pressmove&&i.on("pressmove",this.original.character.pressmove),this.original.character.pressup&&i.on("pressup",this.original.character.pressup),this.original.character.removed&&i.on("removed",this.original.character.removed),this.original.character.rollout&&i.on("rollout",this.original.character.rollout),this.original.character.rollover&&i.on("rollover",this.original.character.rollover),this.original.character.tick&&i.on("tick",this.original.character.tick)),i.missing&&(null==this.missingGlyphs&&(this.missingGlyphs=[]),this.missingGlyphs.push({position:a,character:this.text.charAt(a),font:h.font})),0==h.tracking&&1==this.ligatures){var n=this.text.substr(a,4);i._font.ligatures[n.charAt(0)]&&i._font.ligatures[n.charAt(0)][n.charAt(1)]&&(i._font.ligatures[n.charAt(0)][n.charAt(1)][n.charAt(2)]?i._font.ligatures[n.charAt(0)][n.charAt(1)][n.charAt(2)][n.charAt(3)]?(i.setGlyph(i._font.ligatures[n.charAt(0)][n.charAt(1)][n.charAt(2)][n.charAt(3)].glyph),a+=3):(i.setGlyph(i._font.ligatures[n.charAt(0)][n.charAt(1)][n.charAt(2)].glyph),a+=2):(i.setGlyph(i._font.ligatures[n.charAt(0)][n.charAt(1)].glyph),a+=1))}if(1==this.overset)break;if(1==this.measured&&r+i.measuredWidth>this.getWidth()&&1==this.oversetPotential){this.oversetIndex=a,this.overset=!0;break}if(0==this.measured&&r+i.measuredWidth>this.getWidth()){this.oversetIndex=a,this.overset=!0;break}i.hPosition=r,this.characters.push(i),this.block.addChild(i),r=r+i._glyph.offset*i.size+i.characterCaseOffset+i.trackingOffset()+i._glyph.getKerning(this.getCharCodeAt(a+1),i.size)}e=this.characters.length;var o,l=!1;for(a=0;e>a;a++)if(i=this.characters[a],o=this.pathPoints.getPathPoint(i.hPosition,r,i._glyph.offset*i.size),1==l&&(this.characters[a-1].parent.rotation=o.rotation,l=!1),1==o.next&&(l=!0),i.rotation=o.rotation,this.valign==t.VerticalAlign.BaseLine)if(i.x=o.x,i.y=o.y,o.offsetX){var c=new createjs.Container;c.x=o.x,c.y=o.y,c.rotation=o.rotation,i.parent.removeChild(i),c.addChild(i),i.x=o.offsetX,i.y=0,i.rotation=0,this.addChild(c)}else i.x=o.x,i.y=o.y,i.rotation=o.rotation;else{var c=new createjs.Container;c.x=o.x,c.y=o.y,c.rotation=o.rotation,i.parent.removeChild(i),c.addChild(i),i.x=0,i.y=this.valign==t.VerticalAlign.Top?i.size:this.valign==t.VerticalAlign.Bottom?i._font.descent/i._font.units*i.size:this.valign==t.VerticalAlign.CapHeight?i._font["cap-height"]/i._font.units*i.size:this.valign==t.VerticalAlign.XHeight?i._font["x-height"]/i._font.units*i.size:this.valign==t.VerticalAlign.Ascent?i._font.ascent/i._font.units*i.size:this.valign==t.VerticalAlign.Center?i._font["cap-height"]/i._font.units*i.size/2:this.valign==t.VerticalAlign.Percent?this.valignPercent*i.size:0,i.rotation=0,this.addChild(c)}return this.original.block&&(this.original.block.added&&this.block.on("added",this.original.block.added),this.original.block.click&&this.block.on("click",this.original.block.click),this.original.block.dblclick&&this.block.on("dblclick",this.original.block.dblclick),this.original.block.mousedown&&this.block.on("mousedown",this.original.block.mousedown),this.original.block.mouseout&&this.block.on("mouseout",this.original.block.mouseout),this.original.block.mouseover&&this.block.on("mouseover",this.original.block.mouseover),this.original.block.pressmove&&this.block.on("pressmove",this.original.block.pressmove),this.original.block.pressup&&this.block.on("pressup",this.original.block.pressup),this.original.block.removed&&this.block.on("removed",this.original.block.removed),this.original.block.rollout&&this.block.on("rollout",this.original.block.rollout),this.original.block.rollover&&this.block.on("rollover",this.original.block.rollover),this.original.block.tick&&this.block.on("tick",this.original.block.tick)),!0},e.prototype.trackingOffset=function(t,i,e){return i*(2.5/e+1/900+t/990)},e.prototype.offsetTracking=function(t,i,e){return Math.floor(990*(t-2.5/e-1/900)/i)},e.prototype.getCharCodeAt=function(i){return this.characterCase==t.Case.NORMAL?this.text.charAt(i).charCodeAt(0):this.characterCase==t.Case.UPPER?this.text.charAt(i).toUpperCase().charCodeAt(0):this.characterCase==t.Case.LOWER?this.text.charAt(i).toLowerCase().charCodeAt(0):this.characterCase==t.Case.SMALL_CAPS?this.text.charAt(i).toUpperCase().charCodeAt(0):this.text.charAt(i).charCodeAt(0)},e}(createjs.Container));t.PathText=i}(txt||(txt={}));var txt;!function(t){!function(t){t[t.Rainbow=0]="Rainbow",t[t.Stairstep=1]="Stairstep"}(t.PathFit||(t.PathFit={}));t.PathFit;!function(t){t[t.Center=0]="Center",t[t.Right=1]="Right",t[t.Left=2]="Left"}(t.PathAlign||(t.PathAlign={}));var i=t.PathAlign,e=function(){function e(i,e,s,h,r,a){void 0===e&&(e=0),void 0===s&&(s=null),void 0===h&&(h=!1),void 0===r&&(r=t.PathFit.Rainbow),void 0===a&&(a=t.PathAlign.Center),this.pathElement=null,this.path=null,this.start=0,this.center=null,this.end=null,this.angles=null,this.flipped=!1,this.fit=t.PathFit.Rainbow,this.align=t.PathAlign.Center,this.length=null,this.realLength=null,this.closed=!1,this.clockwise=!0,this.path=i,this.start=e,this.align=a,this.end=s,this.flipped=h,this.fit=r,this.update()}return e.prototype.update=function(){this.pathElement=document.createElementNS("http://www.w3.org/2000/svg","path"),this.pathElement.setAttributeNS(null,"d",this.path),this.length=this.pathElement.getTotalLength(),this.closed=-1!=this.path.toLowerCase().indexOf("z");var t=this.length/10,i=[];i.push(this.getRealPathPoint(0)),i.push(this.getRealPathPoint(t)),i.push(this.getRealPathPoint(2*t)),i.push(this.getRealPathPoint(3*t)),i.push(this.getRealPathPoint(4*t)),i.push(this.getRealPathPoint(5*t)),i.push(this.getRealPathPoint(6*t)),i.push(this.getRealPathPoint(7*t)),i.push(this.getRealPathPoint(8*t)),i.push(this.getRealPathPoint(9*t)),i.push(this.getRealPathPoint(10*t));var e=(i[1].x-i[0].x)*(i[1].y+i[0].y)+(i[2].x-i[1].x)*(i[2].y+i[1].y)+(i[3].x-i[2].x)*(i[3].y+i[2].y)+(i[4].x-i[3].x)*(i[4].y+i[3].y)+(i[5].x-i[4].x)*(i[5].y+i[4].y)+(i[6].x-i[5].x)*(i[6].y+i[5].y)+(i[7].x-i[6].x)*(i[7].y+i[6].y)+(i[8].x-i[7].x)*(i[8].y+i[7].y)+(i[9].x-i[8].x)*(i[9].y+i[8].y)+(i[10].x-i[9].x)*(i[10].y+i[9].y);this.clockwise=e>0?!1:!0,null==this.end&&(this.end=this.length),0==this.closed?0==this.flipped?this.start>this.end?(this.realLength=this.start-this.end,this.center=this.start-this.realLength/2):(this.realLength=this.end-this.start,this.center=this.start+this.realLength/2):this.start>this.end?(this.realLength=this.start-this.end,this.center=this.start-this.realLength/2):(this.realLength=this.end-this.start,this.center=this.start+this.realLength/2):0==this.clockwise?0==this.flipped?this.start>this.end?(this.realLength=this.start-this.end,this.center=this.end+this.realLength/2):(this.realLength=this.start+this.length-this.end,this.center=this.end+this.realLength/2,this.center>this.length&&(this.center=this.center-this.length)):this.start>this.end?(this.realLength=this.end+this.length-this.start,this.center=this.start+this.realLength/2,this.center>this.length&&(this.center=this.center-this.length)):(this.realLength=this.end-this.start,this.center=this.start+this.realLength/2):0==this.flipped?this.start>this.end?(this.realLength=this.end+this.length-this.start,this.center=this.start+this.realLength/2,this.center>this.length&&(this.center=this.center-this.length)):(this.realLength=this.end-this.start,this.center=this.start+this.realLength/2):this.start>this.end?(this.realLength=this.start-this.end,this.center=this.end+this.realLength/2):(this.realLength=this.start+this.length-this.end,this.center=this.end+this.realLength/2,this.center>this.length&&(this.center=this.center-this.length))},e.prototype.getRealPathPoint=function(t){return this.pathElement.getPointAtLength(t>this.length?t-this.length:0>t?t+this.length:t)},e.prototype.getPathPoint=function(t,e,s){void 0===e&&(e=0),void 0===s&&(s=0),t=.99*t,e=.99*e;var h,r,a,n=!0,o=0;0==this.closed?0==this.flipped?this.start>this.end?(this.align==i.Left?o=this.start:this.align==i.Center?o=this.start-(this.realLength-e)/2:this.align==i.Right&&(o=this.start-this.realLength-e),a=o-t,n=!1):(this.align==i.Left?o=this.start:this.align==i.Center?o=this.start+(this.realLength-e)/2:this.align==i.Right&&(o=this.start+this.realLength-e),a=o+t):this.start>this.end?(this.align==i.Left?o=this.start:this.align==i.Center?o=this.start-(this.realLength-e)/2:this.align==i.Right&&(o=this.start-this.realLength-e),a=o-t,n=!1):(this.align==i.Left?o=this.start:this.align==i.Center?o=this.start+(this.realLength-e)/2:this.align==i.Right&&(o=this.start+this.realLength-e),a=o-t):0==this.clockwise?0==this.flipped?this.start>this.end?(this.align==i.Left?o=this.start:this.align==i.Center?o=this.start-(this.realLength-e)/2:this.align==i.Right&&(o=this.start-this.realLength-e),a=o-t,n=!1):(this.align==i.Left?(o=this.start,a=o-t):this.align==i.Center?(o=this.start-(this.realLength-e)/2,a=o-t):this.align==i.Right&&(o=this.start-this.realLength-e,a=o-t),0>a&&(a+=this.length),n=!1):this.start>this.end?(this.align==i.Left?(o=this.start,a=o+t):this.align==i.Center?(o=this.start+(this.realLength-e)/2,a=o+t):this.align==i.Right&&(o=this.start+this.realLength-e,a=o+t),a>this.length&&(a-=this.length)):(this.align==i.Left?o=this.start:this.align==i.Center?o=this.start+(this.realLength-e)/2:this.align==i.Right&&(o=this.start+this.realLength-e),a=o+t):0==this.flipped?this.start>this.end?(this.align==i.Left?(o=this.start,a=o-t):this.align==i.Center?(o=this.start-(this.realLength-e)/2,a=o-t):this.align==i.Right&&(o=this.start-this.realLength-e,a=o-t),0>a&&(a+=this.length),n=!1):(this.align==i.Left?o=this.start:this.align==i.Center?o=this.start-(this.realLength-e)/2:this.align==i.Right&&(o=this.start-this.realLength-e),a=o-t,n=!1):this.start>this.end?(this.align==i.Left?o=this.start:this.align==i.Center?o=this.start+(this.realLength-e)/2:this.align==i.Right&&(o=this.start+this.realLength-e),a=o+t):(this.align==i.Left?(o=this.start,a=o+t):this.align==i.Center?(o=this.start+(this.realLength-e)/2,a=o+t):this.align==i.Right&&(o=this.start+this.realLength-e,a=o+t),a>this.length&&(a-=this.length)),h=this.getRealPathPoint(a);var l=this.pathElement.pathSegList.getItem(this.pathElement.getPathSegAtLength(a)).pathSegType;if(4==l)if(n);else if(this.pathElement.getPathSegAtLength(a)!=this.pathElement.getPathSegAtLength(a-s)){var c=this.getRealPathPoint(a),g=this.getRealPathPoint(a-s),d=this.pathElement.pathSegList.getItem(this.pathElement.getPathSegAtLength(a)-1),u=Math.sqrt(Math.pow(c.x-d.x,2)+Math.pow(c.y-d.y,2)),p=Math.sqrt(Math.pow(g.x-d.x,2)+Math.pow(g.y-d.y,2));if(u>p){h=c,r={x:d.x,y:d.y};var f=180*Math.atan((r.y-h.y)/(r.x-h.x))/Math.PI;return h.x>r.x&&(f+=180),0>f&&(f+=360),f>360&&(f-=360),h.rotation=f,h}return h={x:d.x,y:d.y},h.offsetX=-u,h.next=!0,h}r=this.getRealPathPoint(n?a+s:a-s);var f=180*Math.atan((r.y-h.y)/(r.x-h.x))/Math.PI;return h.x>r.x&&(f+=180),0>f&&(f+=360),f>360&&(f-=360),h.rotation=f,h},e}();t.Path=e}(txt||(txt={}));var txt;!function(t){var i=function(t){function i(){t.call(this),this.hasNewLine=!1,this.hasHyphen=!1,this.hasSpace=!1,this.spaceOffset=0}return __extends(i,t),i.prototype.lastCharacter=function(){return this.children[this.children.length-1]},i}(createjs.Container);t.Word=i}(txt||(txt={}));var txt;!function(t){var i=function(t){function i(){t.call(this)}return __extends(i,t),i.prototype.lastWord=function(){return this.children[this.children.length-1]},i.prototype.lastCharacter=function(){return this.children[this.children.length-1]},i}(createjs.Container);t.Line=i}(txt||(txt={}));